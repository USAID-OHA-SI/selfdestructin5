[{"path":"/articles/create-mdb-tables.html","id":"mission-director-briefer-tables","dir":"Articles","previous_headings":"","what":"Mission Director Briefer Tables","title":"Create MDB Tables","text":"Mission Director Briefer (MDB) Tables SI product created quarterly basis using latest OU_IM MER Structured dataset (MSD). Two tables produced, one summarizes current achievement set core (main) indicators, another summarizes TX_MMD, VLS, VLC. Starting FY21 Q2, SI team migrated production tables Tableau R. Eventually, SI team created package automate much data munging required tables. selfdestructin5 package result efforts. review process creating main treatment tables. Load helper functions/paths SI packages. Create time metadata objects used data munging table creation data loaded time objects created, ready munge data. Let’s start main table. mdb_tbl data frame wide-shaped data frame contains embedded svg icons fontawesome package. can pass create_mdb function make table desired operating unit. steps similar creating treatment table.","code":"# Load libraries needed for table creation (glitr, glamr and gophr are OHA-SI packages not on CRAN)   library(glitr)   library(glamr)   library(tidyverse)   library(gophr)   library(gt)   library(selfdestructin5)   library(fontawesome) # Set up paths      mdb_out <- \"../../Sandbox/\" #Alter this path to where you'd like saved tables to go     merdata <- si_path(\"path_msd\")     load_secrets()      # Load OU_IM table - using FY21 Q2 data from Panorama     ou_im <-        si_path() %>%        return_latest(\"OU_IM_FY19-21_20210618_v2_1\") %>%       read_msd() # Time metadata needed       pd <- create_pd(ou_im)     msd_source <- pd %>% msd_period(period = .) # Main Table    # Create the long mdb_df of the main summary indicators     # This will remove mechs with known issues by default. If you want to keep all mechs set `resolve_issues == FALSE`       mdb_df   <- make_mdb_df(ou_im)         # Create the reshaped df that is gt() ready       mdb_tbl  <- reshape_mdb_df(mdb_df, pd)         # the `agg_type` column flags the operatingunit as either OU, Region-Country or Agency       mdb_tbl %>% distinct(agg_type, operatingunit) %>% slice(1:15) # Generate base table for global results     create_mdb(mdb_tbl, ou = \"Global\", type = \"main\", pd, msd_source)  # Try a specific country now     create_mdb(mdb_tbl, ou = \"Zambia\", type = \"main\", pd, msd_source)      # Or a regional program     create_mdb(mdb_tbl, ou = \"Asia Region-Indonesia\", type = \"main\", pd, msd_source) # Create the treatment data frame needed for derived indicators     mdb_df_tx    <- make_mdb_tx_df(ou_im, resolve_issues = F)     mdb_tbl_tx   <- reshape_mdb_tx_df(mdb_df_tx, pd)          create_mdb(mdb_tbl_tx, ou = \"Global\", type = \"treatment\", pd, msd_source)"},{"path":"/articles/create-mdb-tables.html","id":"batching-tables","dir":"Articles","previous_headings":"","what":"Batching Tables","title":"Create MDB Tables","text":"reshape functions main treatment indicators return single data frame operating units PEPFAR, including Global region-country level. Using agg_type column, can define list operating units can batch create tables.","code":"# First, define a function to return the distinct levels in each aggregation type  # create batch tables  distinct_agg_type <- function(df, type = \"OU\"){    df %>%       filter(agg_type == {{type}}) %>%       distinct(operatingunit) %>%       pull()   }      # Write the different types to character objects   ous <- distinct_agg_type(mdb_tbl, \"OU\")   glb <- distinct_agg_type(mdb_tbl, \"Agency\")   rgl <- distinct_agg_type(mdb_tbl, \"Region-Country\")      # Use purr to map across the list and create tables for all entries in each object   purrr::map(ous, ~create_mdb(mdb_tbl, ou = .x, type = \"main\", pd, msd_source) %>%          gtsave(., path = mdb_out, filename = glue::glue(\"{.x}_{pd}_mdb_main.png\")))         # TREATMENT   ous_tx <- distinct_agg_type(mdb_tbl_tx, \"OU\")      map(ous, ~create_mdb(mdb_tbl_tx, ou = .x, type = \"treatment\", pd, msd_source) %>%          gtsave(., path = mdb_out, filename = glue::glue(\"{.x}_{pd}_mdb_treatment.png\")))"},{"path":"/articles/create-mdb-tables.html","id":"creating-semi-custom-tables","dir":"Articles","previous_headings":"","what":"Creating semi-custom tables","title":"Create MDB Tables","text":"core indicator ’d like focus across list operating units, possible use main treatment data frames create custom table OUs indicator. example, say like compare Zambia, Malawi, Mozambique, Tanzania, Zimbabwes’s HTS_TST_POS performance. can filter mdb_tbl data frame given indicator. can also create comparison table OU achievement core indicators. couple reshapes filters, can generate summary table organized descending order TX_CURR.","code":"# Filter existing wide data frame to desired indicator and OUs   mdb_tbl_hts_tst <- mdb_tbl %>%      filter(indicator == \"HTS_TST_POS\") %>%      filter(operatingunit %in% c(\"Malawi\", \"Zambia\", \"Tanzania\", \"Mozambique\", \"Zimbabwe\"))   # Pass resulting data frame to the mdb_main_theme() with a bit of rearranging to get a desired sort order.   mdb_tbl_hts_tst %>%      mutate(operatingunit = fct_reorder(operatingunit, present_targets_achievement, .desc = T)) %>%       arrange(agency, operatingunit) %>%      gt(groupname_col = \"agency\") %>%      mdb_main_theme(pd, msd_source) %>%      cols_unhide(\"operatingunit\") %>%      cols_align(       align = \"left\",       columns = operatingunit     ) %>%      cols_hide(indicator2) %>%      tab_header(       title = glue::glue(\"HTS_TST Comparison Across OUs\")     ) mdb_tbl %>%      filter(agency == \"USAID\", agg_type == \"OU\") %>%      select(operatingunit, present_targets_achievement, indicator) %>%      pivot_wider(names_from = indicator,                  values_from = present_targets_achievement,                 names_sort = TRUE) %>%      arrange(desc(TX_CURR)) %>%      gt() %>%      fmt_missing(columns = -c(\"operatingunit\"), missing_text = \"-\") %>%      fmt_percent(columns = -c(\"operatingunit\"), decimals = 0) %>%      cols_label(operatingunit = \"\") %>%      tab_options(       source_notes.font.size = 8,       table.font.size = 13,        data_row.padding = gt::px(5)     ) %>%      tab_header(title = glue::glue(\"USAID OU PERFORMANCE SUMMARY FOR {pd}\"))"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Tim Essam. Author, maintainer. Aaron Chafetz. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Essam T, Chafetz (2022). selfdestructin5: Creates SI OHA Mission Director Briefers. R package version 0.2.1, https://github.com/USAID-OHA-SI/selfdestructin5.","code":"@Manual{,   title = {selfdestructin5: Creates SI OHA Mission Director Briefers},   author = {Tim Essam and Aaron Chafetz},   year = {2022},   note = {R package version 0.2.1},   url = {https://github.com/USAID-OHA-SI/selfdestructin5}, }"},{"path":"/index.html","id":"selfdestructin5-","dir":"","previous_headings":"","what":"Creates SI OHA Mission Director Briefers","title":"Creates SI OHA Mission Director Briefers","text":"SI utilities package create Mission Director Briefers MSDs","code":""},{"path":"/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Creates SI OHA Mission Director Briefers","text":"selfdestructin5 package convenient way munge create high quality tables select set PEPFAR indicators. created package automate creation quarterly Mission Director Tables summarize Missions performance across subset indicators. Focal users SI staff tasked creating, updating modifying Mission Director Briefer tables.","code":""},{"path":"/index.html","id":"installing-selfdestructin5","dir":"","previous_headings":"Overview","what":"Installing selfdestructin5","title":"Creates SI OHA Mission Director Briefers","text":"selfdestructin5 CRAN, install directly Github using remotes. remotes installed, run install.packages(\"remotes\") line code well. Disclaimer: findings, interpretation, conclusions expressed herein authors necessarily reflect views United States Agency International Development. errors remain .","code":"## SETUP    #install     install.packages(\"remotes\")     remotes::install_github(\"USAID-OHA-SI/selfdestructin5\")        #load the package     library(selfdestructin5)    ## List the functions contained in the package   ls('package:selfdestructin5')"},{"path":"/reference/authors_footnote.html","id":null,"dir":"Reference","previous_headings":"","what":"Create author footnote for gt theme — authors_footnote","title":"Create author footnote for gt theme — authors_footnote","text":"Create author footnote gt theme","code":""},{"path":"/reference/authors_footnote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create author footnote for gt theme — authors_footnote","text":"","code":"authors_footnote(msd_source)"},{"path":"/reference/authors_footnote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create author footnote for gt theme — authors_footnote","text":"msd_source source metadata recovered msd_period()","code":""},{"path":"/reference/authors_footnote.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create author footnote for gt theme — authors_footnote","text":"string","code":""},{"path":[]},{"path":"/reference/calc_growth.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate growth between two metrics that are positive — calc_growth","title":"Calculate growth between two metrics that are positive — calc_growth","text":"Helper function calculating growth. Returns NA_real_ ","code":""},{"path":"/reference/calc_growth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate growth between two metrics that are positive — calc_growth","text":"","code":"calc_growth(x, y)"},{"path":"/reference/calc_growth.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate growth between two metrics that are positive — calc_growth","text":"x numerator calculate growth - recent metric y denominator calculate growth - lagged metric","code":""},{"path":[]},{"path":"/reference/calc_growth.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate growth between two metrics that are positive — calc_growth","text":"","code":"if (FALSE) {  calc_growth(110, 100) #should give 10%  df %>% mutate(z_change = calc_growth(results_cumulative, dplyr::lag(results_cumulative, n = 4)))}"},{"path":"/reference/caveats_footnote.html","id":null,"dir":"Reference","previous_headings":"","what":"Create caveat note for gt theme — caveats_footnote","title":"Create caveat note for gt theme — caveats_footnote","text":"Create caveat note gt theme","code":""},{"path":"/reference/caveats_footnote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create caveat note for gt theme — caveats_footnote","text":"","code":"caveats_footnote()"},{"path":[]},{"path":"/reference/change_footnote.html","id":null,"dir":"Reference","previous_headings":"","what":"Create change note for gt theme — change_footnote","title":"Create change note for gt theme — change_footnote","text":"Create change note gt theme","code":""},{"path":"/reference/change_footnote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create change note for gt theme — change_footnote","text":"","code":"change_footnote()"},{"path":[]},{"path":"/reference/collapse_base_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Collapse base MSD down to a desired level for main MDB table — collapse_base_tbl","title":"Collapse base MSD down to a desired level for main MDB table — collapse_base_tbl","text":"Helper function collapse data provided grouping. Used creation main MDB table.","code":""},{"path":"/reference/collapse_base_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collapse base MSD down to a desired level for main MDB table — collapse_base_tbl","text":"","code":"collapse_base_tbl(df, indic_list, ...)"},{"path":"/reference/collapse_base_tbl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collapse base MSD down to a desired level for main MDB table — collapse_base_tbl","text":"df MSD Genie data frame indic_list list indicators filter ... dot-dot-dot can passed group_by step","code":""},{"path":[]},{"path":"/reference/collapse_vlc_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Collapse base MSD down to a desired level for core treatment indicators — collapse_vlc_tbl","title":"Collapse base MSD down to a desired level for core treatment indicators — collapse_vlc_tbl","text":"Helper function collapse data provided grouping. Used creation treatment / viral load coverage MDB table.","code":""},{"path":"/reference/collapse_vlc_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collapse base MSD down to a desired level for core treatment indicators — collapse_vlc_tbl","text":"","code":"collapse_vlc_tbl(df, ...)"},{"path":"/reference/collapse_vlc_tbl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collapse base MSD down to a desired level for core treatment indicators — collapse_vlc_tbl","text":"df MSD Genie data frame ... dot-dot-dot used grouping option","code":""},{"path":"/reference/collapse_vlc_tbl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Collapse base MSD down to a desired level for core treatment indicators — collapse_vlc_tbl","text":"collapsed data frame TX_CURR TX_PVLS indicators","code":""},{"path":[]},{"path":"/reference/create_mdb.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper function to create a MDB table — create_mdb","title":"Wrapper function to create a MDB table — create_mdb","text":"Creates MDB table specified OU list OUS. Can called purrr statement batch creating","code":""},{"path":"/reference/create_mdb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper function to create a MDB table — create_mdb","text":"","code":"create_mdb(   df,   ou,   type = \"main\",   pd = pd,   msd_source = msd_source,   legend = NULL )"},{"path":"/reference/create_mdb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper function to create a MDB table — create_mdb","text":"df data frame resulting running reshape_mdb_df() reshape_mdb_tx_df() ou operating unit table returned type type table created, main treatment pd period data msd_source source msd legend can pass legend subtitle desired, default NULL","code":""},{"path":"/reference/create_mdb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrapper function to create a MDB table — create_mdb","text":"mdb_gt gt object formatted main treatment table","code":""},{"path":"/reference/create_mdb.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Wrapper function to create a MDB table — create_mdb","text":"","code":"if (FALSE) {  create_mdb(mdb_tbl, \"Global\")  create_mdb(mdb_tbl_tx, \"Zambia\", type = \"treatment\")    # Batch produce tables    ou_batch <- mdb_tbl_tx %>%   filter(agg_type == \"OU\") %>%   distinct(operatingunit) %>% pull()    purrr::map(ou_batch, ~create_mdb(mdb_tbl, ou = .x))      # More advanced example selecting single indicator across numerous OUS    create_mdb(mdb_tbl_tx %>% filter(indicator == \"VLC\"),   c(\"Malawi\", \"Zambia\"), type = \"treatment\") %>%   cols_unhide(operatingunit)}"},{"path":"/reference/create_pd.html","id":null,"dir":"Reference","previous_headings":"","what":"Return msd metadata for pd object — create_pd","title":"Return msd metadata for pd object — create_pd","text":"derived pd object used throughout generation tables. used multiple times formatting columns column spanners.","code":""},{"path":"/reference/create_pd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Return msd metadata for pd object — create_pd","text":"","code":"create_pd(df)"},{"path":"/reference/create_pd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Return msd metadata for pd object — create_pd","text":"df MSD Genie extract","code":""},{"path":"/reference/create_pd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Return msd metadata for pd object — create_pd","text":"object format FYXXQX","code":""},{"path":[]},{"path":"/reference/dedup_footnote.html","id":null,"dir":"Reference","previous_headings":"","what":"Create dedup note for gt theme — dedup_footnote","title":"Create dedup note for gt theme — dedup_footnote","text":"Create dedup note gt theme","code":""},{"path":"/reference/dedup_footnote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create dedup note for gt theme — dedup_footnote","text":"","code":"dedup_footnote()"},{"path":[]},{"path":"/reference/delta_footnote.html","id":null,"dir":"Reference","previous_headings":"","what":"Create delta note for gt theme — delta_footnote","title":"Create delta note for gt theme — delta_footnote","text":"Create delta note gt theme","code":""},{"path":"/reference/delta_footnote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create delta note for gt theme — delta_footnote","text":"","code":"delta_footnote()"},{"path":[]},{"path":"/reference/extract_num_colnames.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract a vector of numeric column names — extract_num_colnames","title":"Extract a vector of numeric column names — extract_num_colnames","text":"helper function used extract names numeric columns TX mdb table. result passed treatment theme use formatting columns.","code":""},{"path":"/reference/extract_num_colnames.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract a vector of numeric column names — extract_num_colnames","text":"","code":"extract_num_colnames(df)"},{"path":"/reference/extract_num_colnames.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract a vector of numeric column names — extract_num_colnames","text":"df data frame reshape_mdb_tx_df() call","code":""},{"path":"/reference/extract_num_colnames.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract a vector of numeric column names — extract_num_colnames","text":"vector column names numeric vars","code":""},{"path":[]},{"path":"/reference/fetch_indicators.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetches indicators used to make tables, accounting for quarter of MSD and semi-annual indicators — fetch_indicators","title":"Fetches indicators used to make tables, accounting for quarter of MSD and semi-annual indicators — fetch_indicators","text":"MDB indicators stored google drive. helper function fetches desired tab. Used create filters, sort factor levels, apply plain labels indicators.","code":""},{"path":"/reference/fetch_indicators.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetches indicators used to make tables, accounting for quarter of MSD and semi-annual indicators — fetch_indicators","text":"","code":"fetch_indicators(df, tab = \"main\")"},{"path":"/reference/fetch_indicators.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetches indicators used to make tables, accounting for quarter of MSD and semi-annual indicators — fetch_indicators","text":"df data frame indicators fetched tab tab fetch (main treatment) googlesheet","code":""},{"path":"/reference/fetch_indicators.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetches indicators used to make tables, accounting for quarter of MSD and semi-annual indicators — fetch_indicators","text":"dataframe indicators","code":""},{"path":"/reference/fetch_indicators.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetches indicators used to make tables, accounting for quarter of MSD and semi-annual indicators — fetch_indicators","text":"","code":"if (FALSE) {  fetch_indicators(ou_im, tab = \"main\")  fetch_indicators(ou_im, tab = \"treatment\")}"},{"path":"/reference/format_indicator.html","id":null,"dir":"Reference","previous_headings":"","what":"Formats PEPFAR indicators for MDB tables — format_indicator","title":"Formats PEPFAR indicators for MDB tables — format_indicator","text":"Formats string containing main PEPFAR abbrevation plain text. PEPFAR abbreviation listed first plain text line . Used create upper portion MDB tables.","code":""},{"path":"/reference/format_indicator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Formats PEPFAR indicators for MDB tables — format_indicator","text":"","code":"format_indicator(x)"},{"path":"/reference/format_indicator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Formats PEPFAR indicators for MDB tables — format_indicator","text":"x PEPFAR indicator name abbreviation full definition","code":""},{"path":"/reference/format_indicator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Formats PEPFAR indicators for MDB tables — format_indicator","text":"html formatted string can rendered gt","code":""},{"path":[]},{"path":"/reference/format_indicator.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Formats PEPFAR indicators for MDB tables — format_indicator","text":"","code":"if (FALSE) {  format_indicator(\"HTS_TST Received HIV testing service and results\") %>%   gt::html() %>%  htmltools::html_print()  df %>% mutate(indicator2 = format_indicator(indicator2)) }"},{"path":"/reference/label_aggregation.html","id":null,"dir":"Reference","previous_headings":"","what":"Label aggregation level — label_aggregation","title":"Label aggregation level — label_aggregation","text":"Labels level aggregation using regiona, agency operating unit Used apply filter column single data frame returned table operations","code":""},{"path":"/reference/label_aggregation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Label aggregation level — label_aggregation","text":"","code":"label_aggregation(df, type = \"OU\")"},{"path":"/reference/label_aggregation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Label aggregation level — label_aggregation","text":"df MSD genie data frame ran collapse_base_tbl() type Level aggregation labeled","code":""},{"path":[]},{"path":"/reference/legend_q1.html","id":null,"dir":"Reference","previous_headings":"","what":"Object pointing to github location of legend for Q1 — legend_q1","title":"Object pointing to github location of legend for Q1 — legend_q1","text":"helper object returns location q1_cumulative legend. object passed legend_chunk f() creates md legend. can inserted subtitle image.","code":""},{"path":"/reference/legend_q1.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Object pointing to github location of legend for Q1 — legend_q1","text":"","code":"legend_q1"},{"path":"/reference/legend_q1.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Object pointing to github location of legend for Q1 — legend_q1","text":"object class character length 1.","code":""},{"path":[]},{"path":"/reference/legend_q2.html","id":null,"dir":"Reference","previous_headings":"","what":"Object pointing to github location of legend for Q2 — legend_q2","title":"Object pointing to github location of legend for Q2 — legend_q2","text":"helper object returns location q2_cumulative legend. object passed legend_chunk f() creates md legend. can inserted subtitle image.","code":""},{"path":"/reference/legend_q2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Object pointing to github location of legend for Q2 — legend_q2","text":"","code":"legend_q2"},{"path":"/reference/legend_q2.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Object pointing to github location of legend for Q2 — legend_q2","text":"object class character length 1.","code":""},{"path":[]},{"path":"/reference/legend_q3.html","id":null,"dir":"Reference","previous_headings":"","what":"Object pointing to github location of legend for Q3 — legend_q3","title":"Object pointing to github location of legend for Q3 — legend_q3","text":"helper object returns location q3_cumulative legend. object passed legend_chunk f() creates md legend. can inserted subtitle image.","code":""},{"path":"/reference/legend_q3.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Object pointing to github location of legend for Q3 — legend_q3","text":"","code":"legend_q3"},{"path":"/reference/legend_q3.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Object pointing to github location of legend for Q3 — legend_q3","text":"object class character length 1.","code":""},{"path":[]},{"path":"/reference/legend_snapshot.html","id":null,"dir":"Reference","previous_headings":"","what":"Object pointing to github location of legend for snapshot indicators and Q4 — legend_snapshot","title":"Object pointing to github location of legend for snapshot indicators and Q4 — legend_snapshot","text":"helper object returns location snapshot legend. object passed legend_chunk f() creates md legend. can inserted subtitle image.","code":""},{"path":"/reference/legend_snapshot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Object pointing to github location of legend for snapshot indicators and Q4 — legend_snapshot","text":"","code":"legend_snapshot"},{"path":"/reference/legend_snapshot.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Object pointing to github location of legend for snapshot indicators and Q4 — legend_snapshot","text":"object class character length 1.","code":""},{"path":[]},{"path":"/reference/make_achv_shape.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate colored circle as an svg — make_achv_shape","title":"Generate colored circle as an svg — make_achv_shape","text":"Description Function create color achievement circles. circles placed next recent achievement level main MDB table.","code":""},{"path":"/reference/make_achv_shape.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate colored circle as an svg — make_achv_shape","text":"","code":"make_achv_shape(x)"},{"path":"/reference/make_achv_shape.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate colored circle as an svg — make_achv_shape","text":"x color hex code created adorn_achievement function","code":""},{"path":"/reference/make_achv_shape.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate colored circle as an svg — make_achv_shape","text":"return gt html() code svg","code":""},{"path":"/reference/make_achv_shape.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate colored circle as an svg — make_achv_shape","text":"Returns html formatting circle can embedded gt object","code":""},{"path":[]},{"path":"/reference/make_achv_shape.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate colored circle as an svg — make_achv_shape","text":"","code":"if (FALSE) {  achv_circle(glitr::scooter) %>% htmltools::html_print()  df %>% mutate(achv_color = achv_circle(achv_color)) }"},{"path":"/reference/make_chg_shape.html","id":null,"dir":"Reference","previous_headings":"","what":"Create fontawesome performance arrow — make_chg_shape","title":"Create fontawesome performance arrow — make_chg_shape","text":"Creates svg object based direction change performance variable. svg code can embedded data frame passed gt() prettifying table. Appears work well applied purrr::map()","code":""},{"path":"/reference/make_chg_shape.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create fontawesome performance arrow — make_chg_shape","text":"","code":"make_chg_shape(change_dir)"},{"path":"/reference/make_chg_shape.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create fontawesome performance arrow — make_chg_shape","text":"change_dir variable indicating direction change applicable","code":""},{"path":"/reference/make_chg_shape.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create fontawesome performance arrow — make_chg_shape","text":"gt html() code svg","code":""},{"path":[]},{"path":"/reference/make_chg_shape.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create fontawesome performance arrow — make_chg_shape","text":"","code":"if (FALSE) {  rank_chg(\"increase\") %>% htmltools::html_print()  rank_chg(\"decrease\") %>% htmltools::html_print()  df %>% mutate(chg_dir = purrr::map(present_z_direction, rank_chg))  }"},{"path":"/reference/make_mdb_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a base table of MDB indicators stacked long — make_mdb_df","title":"Create a base table of MDB indicators stacked long — make_mdb_df","text":"Makes single table core MDB indicators OUs, countries USAID. Uses fetch_indicators() filter indicators resolves known issues default. Output function feeds reshape_mdb_df()","code":""},{"path":"/reference/make_mdb_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a base table of MDB indicators stacked long — make_mdb_df","text":"","code":"make_mdb_df(df, resolve_issues = T)"},{"path":"/reference/make_mdb_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a base table of MDB indicators stacked long — make_mdb_df","text":"df data frame MDB tables constructed core indicators resolve_issues logical fetches troublesome mechs omits df","code":""},{"path":"/reference/make_mdb_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a base table of MDB indicators stacked long — make_mdb_df","text":"data frame","code":""},{"path":[]},{"path":"/reference/make_mdb_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a base table of MDB indicators stacked long — make_mdb_df","text":"","code":"if (FALSE) {  mdb_df <- make_mdb_df(ou_im, resolve_issues = F)}"},{"path":"/reference/make_mdb_tx_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates the base table for the treatment / VLS MDB tables — make_mdb_tx_df","title":"Creates the base table for the treatment / VLS MDB tables — make_mdb_tx_df","text":"Uses collapse_vlc_tbl() combine different data frames needed calculate VLS VLC. Filters mechs known issues default, can controlled resolve_issues argument. Wrapper function create three core tables needed treatment MDB data frame. First, creates TX_CURR table excludes South Africa USAID Global table. Second, collapse_vlc_tbl() called create VLS/VLC table needed derived indicators. Third, Three month + MMD calculated TX_CURR table. Finally, tables combined used creation VLS/VLC MMD+ Share calculations.","code":""},{"path":"/reference/make_mdb_tx_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates the base table for the treatment / VLS MDB tables — make_mdb_tx_df","text":"","code":"make_mdb_tx_df(df, resolve_issues = \"TRUE\")"},{"path":"/reference/make_mdb_tx_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates the base table for the treatment / VLS MDB tables — make_mdb_tx_df","text":"df usually ou_im data frame resolve_issues logical indicating whether known issues removed","code":""},{"path":"/reference/make_mdb_tx_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates the base table for the treatment / VLS MDB tables — make_mdb_tx_df","text":"data frame combined TX VLS/VLC indicator","code":""},{"path":[]},{"path":"/reference/mdb_main_theme.html","id":null,"dir":"Reference","previous_headings":"","what":"GT theme for main MDB tables — mdb_main_theme","title":"GT theme for main MDB tables — mdb_main_theme","text":"gt theme applied reshaped data frame creation MDB tables. theme formats columns rows main MDB tables. different theme exists treatment tables layout different.","code":""},{"path":"/reference/mdb_main_theme.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"GT theme for main MDB tables — mdb_main_theme","text":"","code":"mdb_main_theme(df, pd, msd_source, ...)"},{"path":"/reference/mdb_main_theme.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"GT theme for main MDB tables — mdb_main_theme","text":"df reshape_mdb_df() output pd character object style FY@Q@ returned gophr::identifypd() msd_source source data used generate tables ... dot-dot-dot option pass additional formatting gt object","code":""},{"path":"/reference/mdb_main_theme.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"GT theme for main MDB tables — mdb_main_theme","text":"formatted gt object","code":""},{"path":[]},{"path":"/reference/mdb_main_theme.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"GT theme for main MDB tables — mdb_main_theme","text":"","code":"if (FALSE) {  mdb_df <- make_mdb_df(ou_im, resolve_issues = F)  mdb_tbl <- reshape_mdb_df(mdb_df)  mdb_tbl %>% filter(operatingunit == \"Zambia\") %>% gt(groupname_col = \"agency\") %>% mdb_main_theme()    }"},{"path":"/reference/mdb_treatment_theme.html","id":null,"dir":"Reference","previous_headings":"","what":"GT theme for main MDB tables — mdb_treatment_theme","title":"GT theme for main MDB tables — mdb_treatment_theme","text":"gt theme applied reshaped data frame creation MDB tables. theme formats columns rows main MDB tables. different theme exists main tables layout different.","code":""},{"path":"/reference/mdb_treatment_theme.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"GT theme for main MDB tables — mdb_treatment_theme","text":"","code":"mdb_treatment_theme(df, pd, msd_source, ...)"},{"path":"/reference/mdb_treatment_theme.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"GT theme for main MDB tables — mdb_treatment_theme","text":"df dataframe reshape_mdb_tx_df() output pd character object style FY@Q@ returned gophr::identifypd() msd_source source data used generate tables ... dot-dot-dot option pass additional formatting gt object","code":""},{"path":"/reference/mdb_treatment_theme.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"GT theme for main MDB tables — mdb_treatment_theme","text":"formatted gt object","code":""},{"path":[]},{"path":"/reference/mdb_treatment_theme.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"GT theme for main MDB tables — mdb_treatment_theme","text":"","code":"if (FALSE) {  mdb_df <- make_mdb_tx_df(ou_im, resolve_issues = F)  mdb_tbl <- reshape_mdb_tx_df(mdb_df)  numeric_cols <- mdb_tbl %>% select_if(is.numeric) %>% names()  mdb_tbl %>% filter(operatingunit == \"Zambia\") %>%   gt(groupname_col = \"agency\") %>%   mdb_treatment_theme(numeric_cols)    }"},{"path":"/reference/msd_period.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify MSD Period and Type — msd_period","title":"Identify MSD Period and Type — msd_period","text":"requires si_path setup glamr","code":""},{"path":"/reference/msd_period.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify MSD Period and Type — msd_period","text":"","code":"msd_period(type = \"OU_IM\", period = NULL)"},{"path":"/reference/msd_period.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify MSD Period and Type — msd_period","text":"type Type MSD (OU_IM, PSNU, PSNU_IM, NAT_SUBNAT) period can provide period ICPIutilities::identifypd(), run NULL","code":""},{"path":"/reference/msd_period.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify MSD Period and Type — msd_period","text":"FY00Q0t MSD","code":""},{"path":"/reference/past_fy.html","id":null,"dir":"Reference","previous_headings":"","what":"Create past_fy object for gt theme — past_fy","title":"Create past_fy object for gt theme — past_fy","text":"Create past_fy object gt theme","code":""},{"path":"/reference/past_fy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create past_fy object for gt theme — past_fy","text":"","code":"past_fy(pd)"},{"path":"/reference/past_fy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create past_fy object for gt theme — past_fy","text":"pd format FYXXQX returned gophr::identifypd()","code":""},{"path":"/reference/past_fy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create past_fy object for gt theme — past_fy","text":"string","code":""},{"path":[]},{"path":"/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"/reference/present_fy.html","id":null,"dir":"Reference","previous_headings":"","what":"Create present fy object for gt theme — present_fy","title":"Create present fy object for gt theme — present_fy","text":"Create present fy object gt theme","code":""},{"path":"/reference/present_fy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create present fy object for gt theme — present_fy","text":"","code":"present_fy(pd)"},{"path":"/reference/present_fy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create present fy object for gt theme — present_fy","text":"pd format FYXXQX returned gophr::identifypd()","code":""},{"path":"/reference/present_fy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create present fy object for gt theme — present_fy","text":"string","code":""},{"path":[]},{"path":"/reference/present_qtr.html","id":null,"dir":"Reference","previous_headings":"","what":"Create present quarter object for gt theme — present_qtr","title":"Create present quarter object for gt theme — present_qtr","text":"Create present quarter object gt theme","code":""},{"path":"/reference/present_qtr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create present quarter object for gt theme — present_qtr","text":"","code":"present_qtr(pd)"},{"path":"/reference/present_qtr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create present quarter object for gt theme — present_qtr","text":"pd format FYXXQX returned gophr::identifypd()","code":""},{"path":"/reference/present_qtr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create present quarter object for gt theme — present_qtr","text":"string","code":""},{"path":[]},{"path":"/reference/reshape_mdb_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare filtered data frame for MSD briefer formatting — reshape_mdb_df","title":"Prepare filtered data frame for MSD briefer formatting — reshape_mdb_df","text":"reshape_mdb_df takes output make_mdb_df() creates gt ready data frame. transformed data frame retains recent quarter previous year's performance. resulting table can passed directly mdb_main_theme() create MDB table. Helper functions format certain columns svgs rendered gt call.","code":""},{"path":"/reference/reshape_mdb_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare filtered data frame for MSD briefer formatting — reshape_mdb_df","text":"","code":"reshape_mdb_df(df, pd = pd)"},{"path":"/reference/reshape_mdb_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare filtered data frame for MSD briefer formatting — reshape_mdb_df","text":"df takes make_mdb_df() results input pd metadata MSD used create time variables","code":""},{"path":"/reference/reshape_mdb_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare filtered data frame for MSD briefer formatting — reshape_mdb_df","text":"returns wide formatted data frame (table) OUs, countries USAID","code":""},{"path":[]},{"path":"/reference/reshape_mdb_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare filtered data frame for MSD briefer formatting — reshape_mdb_df","text":"","code":"if (FALSE) {  mdb_df <- make_mdb_df(ou_im, resolve_issues = F)  mdb_tbl <- reshape_mdb_df(mdb_df)  }"},{"path":"/reference/reshape_mdb_tx_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","title":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","text":"reshape_mdb_tx_df takes output make_mdb_tx_df() creates gt ready data frame. transformed data frame retains recent quarter previous year performance. Viral load coverage viral load suppression percentages calculated along TX MMD shares. resulting table can passed directly mdb_treatment_theme() create MDB table. Helper functions format certain columns svgs rendered gt call.","code":""},{"path":"/reference/reshape_mdb_tx_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","text":"","code":"reshape_mdb_tx_df(df, pd)"},{"path":"/reference/reshape_mdb_tx_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","text":"df dataframe result running make_mdb_tx_df() pd metadata MSD used create time variables","code":""},{"path":"/reference/reshape_mdb_tx_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","text":"data frame pivoted wide passing gt() call","code":""},{"path":"/reference/reshape_mdb_tx_df.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","text":"Create wide formatted sorted table treatment indicators","code":""},{"path":[]},{"path":"/reference/reshape_mdb_tx_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare filtered data frame of treatment indicators for MDB formatting — reshape_mdb_tx_df","text":"","code":"if (FALSE) {  mdb_df <- make_mdb_tx_df(ou_im, resolve_issues = F)  mdb_tbl <- reshape_mdb_tx_df(mdb_df)  }"},{"path":"/reference/vlc_footnote.html","id":null,"dir":"Reference","previous_headings":"","what":"Create vlc change note for gt theme — vlc_footnote","title":"Create vlc change note for gt theme — vlc_footnote","text":"Create vlc change note gt theme","code":""},{"path":"/reference/vlc_footnote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create vlc change note for gt theme — vlc_footnote","text":"","code":"vlc_footnote()"},{"path":[]},{"path":"/news/index.html","id":"selfdestructin5-021","dir":"Changelog","previous_headings":"","what":"selfdestructin5 0.2.1","title":"selfdestructin5 0.2.1","text":"Update fmt_missing() sub_missing()","code":""},{"path":"/news/index.html","id":"selfdestructin5-020","dir":"Changelog","previous_headings":"","what":"selfdestructin5 0.2.0","title":"selfdestructin5 0.2.0","text":"Update indicator names reflect new naming conventions FY22Q2 (2022-05-11)","code":""},{"path":"/news/index.html","id":"selfdestructin5-010","dir":"Changelog","previous_headings":"","what":"selfdestructin5 0.1.0","title":"selfdestructin5 0.1.0","text":"MDB production process can done single OU MSD Genie file Q1 - Q3 legend pointers incorporated generate legends top tables","code":""},{"path":"/news/index.html","id":"selfdestructin5-009","dir":"Changelog","previous_headings":"","what":"selfdestructin5 0.0.9","title":"selfdestructin5 0.0.9","text":"MDB production process can done selfdestructin5 package. Bundle legends package can referenced via package url github.","code":""}]
